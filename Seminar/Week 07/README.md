# Статични елементи.

<slidebreak/>

## Статични локални променливи

- Статичните локални променливи се инициализират само веднъж, при първото влизане в scope-a, в който са дефинирани.
- Животът на статичните локални променливи продължава до края на програмата, а не до излизане от scope-a, в който са дефинирани. 

```cpp
int foo()
{
    static int x = 0;
    return ++x;
}

int main()
{
    // 1 2 3 4 5
    for (int i = 0; i < 5; i++)
    {
        std::cout << foo() << " "; 
    }
}
```

<slidebreak/>

## Статични функции
- Статичните функции са функции, които са достъпни само в рамките на файла, в който са дефинирани.

```cpp
// Test.cpp
static int foo() { return 42; }
int bar() { return 42; }

// main.cpp
int main()
{
    // error: 'int foo()' was declared 'static' and was declared 'static' in another translation unit
    // foo();
    bar();
}
```

<slidebreak/>

## Статични членове на клас

- Статичните член-данни не са обвързани с конкретен обект, а с класа като цяло. Тях може да си ги мислим като статични променливи, декларирани в namespace. За да ги достъпим използваме scope resolution оператора `::`. Инициализират се ЗАДЪЛЖИТЕЛНО извън класа.
- Статичните член-функции не са обвързани с конкретен обект, а с класа като цяло. Те не могат да достъпват нестатични член-данни на класа (защото няма обект, над който се изпълняват, няма this). Извикват се чрез scope resolution оператора `::`. Те може да достъпват статични член-данни на класа.

```cpp
class Test
{
public:
    static int x;
};

class AnotherTest
{
    int x;
public:
    static int y;

    static void print()
    {
        // std::cout << this->x << std::endl; // there is no object => no this
        // std::cout << x << std::endl; // there is no global variable x neither static class member x, neither local variable x
        std::cout << y << AnotherTest::y << Test::x << std::endl;
    }
}

int Test::x = 42;
int Test::y = 0;

int main()
{
    std::cout << Test::x << std::endl;
    AnotherTest::print();
    AnotherTest::y = 42;
    AnotherTest::print();
}
```

<slidebreak/>

## Кога използваме статични членове на клас
- Като статични член функции на класа е удобно да се ползват например помощни функции, които не работят с конкретен обект, тоест не достъпват и променят член-данните на класа. Друг пример са factory методите, които създават обекти от текущия клас.
- Като статични член-данни на класа е удобно да се ползват например генератори на уникални идентификатори, кеширане за даден вид обекти, броячи на състояние и т.н. За тези случаи разбира се, е удобно да се работи със статични член-функции.

<slidebreak/>

## Задача

Моделирайте университет, който предлага обучение по дадени специалности, всяка от които има фиксиран набор от курсове, които се водят на студентите. В университета могат да се записват студенти, като дадено лице може да се обучава по не повече от 1 специалност в даден момент. Университетът пази информация за всички студенти и преподаватели в него - ЕГН (уникално), име, възраст. Преподавателите имат набор от курсове, които водят, а студентите набор от оценки за курсовете от специалността им и факултетен номер (уникален). За всеки студент и преподавател трябва да може да се изведе информация за него, както и фиксиран брой статистики по желание. Данните на системата трябва да се съхраняват във файл. При стартиране на системата, трябва да има възможност за зареждане на данните от съществуващ файл или да се стартира с празна система. 